<!DOCTYPE html>
<html
    xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layouts/master}"
>
    <div layout:fragment="content">
        <div class="flex flex-wrap justify-between items-end mb-6 gap-5">
            <div class="grow">
                <h1 class="text-base md:text-lg font-semibold mb-1">[[${user.fullName}]] - Édition</h1>
                <h2 class="text-xs font-medium text-gray-400">Éditer les informations de l'utilisateur</h2>
            </div>
            <div>
                <a
                    th:href="@{/users}"
                    class="text-white bg-blue-500 hover:bg-blue-600 focus:ring focus:ring-blue-300 font-semibold rounded-lg text-xs px-4 py-2 focus:outline-none transition-colors duration-75"
                    >Retour</a
                >
            </div>
        </div>
        <div
            th:insert="~{user/fragments/_nav :: nav(user=${user})}"
            class="mb-6"
        ></div>
        <div class="flex-grow bg-white shadow-sm rounded-lg flex flex-col divide-y divide-gray-100 mb-4">
            <div class="px-7 py-5 flex justify-between items-center flex-wrap gap-x-12 gap-y-2">
                <span class="text-lg font-semibold text-slate-800">Compte</span>
            </div>

            <div class="p-8 mb-2.5 flex flex-col gap-8">
                <div class="flex flex-wrap gap-y-1.5 gap-x-4">
                    <div class="basis-full sm:basis-1/3 font-medium text-gray-400 text-[0.825rem]">
                        Données utilisateur
                    </div>
                    <div th:insert="~{user/fragments/_dump :: dump(obj=${user}, obj_id='userSettings')}"></div>
                </div>

                <div class="flex flex-wrap gap-y-1.5 gap-x-4">
                    <div class="basis-full sm:basis-1/3 font-medium text-gray-400 text-[0.825rem]">Mot de passe (encodé)</div>
                    <div class="font-medium text-sm text-gray-700">[[${user.password}]]</div>
                </div>

                <div class="flex flex-wrap gap-y-1.5 gap-x-4">
                    <div class="basis-full sm:basis-1/3 font-medium text-gray-400 text-[0.825rem]">
                        Actions
                    </div>
                    <div class="flex sm:gap-x-7 md:gap-x-9 lg:gap-x-12 gap-x-4 gap-y-2 flex-wrap">
                        <a th:href="@{/users/{id}/edit(id=${user.id})}"
                            class="md:w-auto flex items-center justify-center py-2.5 px-3.5 text-sm font-medium text-blue-500 focus:outline-none bg-gray-100/75 rounded-lg hover:bg-blue-500 hover:text-white focus:bg-blue-500 focus:text-white transition-colors duration-75">
                            <i class="me-2.5 w-3.5 h-3.5 fa-solid fa-pen"></i>
                            <span>Modifier</span>
                        </a>
                        <form th:action="@{/users/{id}/delete(id=${user.id})}" method="post">
                            <button type="submit"
                                class="md:w-auto flex items-center justify-center py-2.5 px-3.5 text-sm font-medium text-red-500 focus:outline-none bg-gray-100/75 hover:bg-red-500 hover:text-white focus:bg-red-500 focus:text-white transition-colors duration-75">
                                <i class="me-2.5 w-3.5 h-3.5 fa-solid fa-trash"></i>
                                Supprimer
                            </button>
                        </form>
                        <th:block th:switch="${user.isLocked}">
                            <form
                                th:action="@{/users/{id}/unlock(id=${user.id})}"
                                method="post"
                                th:case="true"
                            >
                                <button type="submit"
                                    class="md:w-auto flex items-center justify-center py-2.5 px-3.5 text-sm font-medium text-violet-600 focus:outline-none bg-gray-100/75 hover:bg-violet-600 hover:text-white focus:bg-violet-600 focus:text-white transition-colors duration-75">
                                    <i class="me-2.5 w-3.5 h-3.5 fa-solid fa-lock-open"></i>
                                    Déverrouiller
                                </button>
                            </form>
                            <form
                                th:action="@{/users/{id}/lock(id=${user.id})}"
                                method="post"
                                th:case="false"
                            >
                                <button type="submit"
                                    class="md:w-auto flex items-center justify-center py-2.5 px-3.5 text-sm font-medium text-violet-600 focus:outline-none bg-gray-100/75 hover:bg-violet-600 hover:text-white focus:bg-violet-600 focus:text-white transition-colors duration-75">
                                    <i class="me-2.5 w-3.5 h-3.5 fa-solid fa-lock"></i>
                                    Verrouiller
                                </button>
                            </form>
                        </th:block>
                    </div>
                </div>
            </div>
        </div>
    </div>
</html>
