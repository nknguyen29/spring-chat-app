<div th:fragment="search-form">
    <div class="flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 pb-6 px-1">
        <div class="w-full md:w-1/3">
            <div class="flex items-center">
                <label for="search" class="sr-only">Rechercher</label>
                <div class="relative w-full">
                    <div class="absolute inset-y-0 left-0 flex items-center ps-4 pointer-events-none">
                        <i class="w-4 h-4 text-gray-400 fa-solid fa-search"></i>
                    </div>
                    <input
                        id="search"
                        name="search"
                        th:field="*{userSearch.search}"
                        form="searchForm"
                        type="search"
                        class="bg-gray-100 border border-none text-slate-500 placeholder-gray-400 text-sm rounded-lg focus:bg-gray-200/75 focus:ring-0 block w-full ps-10 pe-3 py-2.5 font-medium"
                        placeholder="Rechercher un utilisateur"
                    />
                </div>
            </div>
        </div>

        <div class="w-full md:w-auto flex flex-col md:flex-row space-y-3 md:space-y-0 items-stretch md:items-center justify-end md:space-x-3 flex-shrink-0">
            <div th:if="${requestQueryString}">
                <a th:href="@{/users}"
                    class="w-full flex items-center justify-center px-2 py-1.5 text-sm font-medium text-white focus:outline-none bg-red-500 rounded-lg hover:bg-red-600 transition-colors duration-75 space-x-3 focus:ring focus:ring-red-300">
                    <i class="h-4 w-4 fa-solid fa-xmark"></i>
                    <span class="text-xs font-medium text-white md:hidden block"
                        >Effacer la recherche</span
                    >
                </a>
            </div>

            <div class="flex items-center space-x-3 w-full md:w-auto">
                <button
                    id="actionsDropdownButton"
                    data-dropdown-toggle="actionsDropdown"
                    class="md:w-auto flex items-center justify-center py-2.5 px-3.5 text-sm font-medium text-blue-500 focus:outline-none bg-gray-100/75 rounded-lg hover:bg-blue-500 hover:text-white focus:bg-blue-500 focus:text-white transition-colors duration-75"
                    type="button"
                >
                    <i class="-ms-1 me-1.5 w-3.5 h-3.5 fa-solid fa-ellipsis-v"></i>
                    <span>Actions</span>
                </button>
                <div id="actionsDropdown"
                    class="hidden z-10 w-auto bg-white rounded shadow-[0px_0px_50px_0px_rgba(82,63,105,0.15)] border border-gray-100 divide-y divide-gray-100">
                    <h6 class="px-5 py-4 font-semibold text-sm text-slate-800">
                        Actions
                    </h6>
                    <div class="p-4 space-y-2">
                        <form id="deleteAllForm" th:action="@{/users/delete-all}" method="post">
                            <button
                                type="submit"
                                form="deleteAllForm"
                                class="py-2 px-4 text-sm font-medium text-red-500 rounded bg-red-50 hover:bg-red-100 focus:bg-red-100 focus:text-red-600 flex items-center flex-wrap gap-y-1 gap-x-2.5"
                                onclick="return confirm('Êtes-vous sûr de vouloir supprimer tous les utilisateurs ?')"
                            >
                                <i class="w-3 h-3 fa-solid fa-trash"></i>
                                <span class="text-left">Supprimer tout</span>
                            </button>
                        </form>
                    </div>
                </div>

                <button
                    id="filterDropdownButton"
                    data-dropdown-toggle="filterDropdown"
                    data-dropdown-placement="bottom-end"
                    class="md:w-auto flex items-center justify-center py-2.5 px-3.5 text-sm font-medium text-blue-500 focus:outline-none bg-gray-100/75 rounded-lg hover:bg-blue-500 hover:text-white focus:bg-blue-500 focus:text-white transition-colors duration-75"
                    type="button"
                >
                    <i class="h-3.5 w-3.5 me-2 fa-solid fa-filter"></i>
                    <span>Filter</span>
                    <i class="-me-0.5 ms-3 w-3 h-3 fa-solid fa-chevron-down"></i>
                </button>
                <div id="filterDropdown"
                    class="hidden z-10 w-[15rem] bg-white rounded shadow-[0px_0px_50px_0px_rgba(82,63,105,0.15)] border border-gray-100 divide-y divide-gray-100">
                    <h6 class="px-5 py-4 font-semibold text-sm text-slate-800">
                        Sélectionner un filtre
                    </h6>
                    <div class="space-y-2 text-sm" aria-labelledby="filterDropdownButton">
                        <div class="px-6 pt-4 pb-6 space-y-5">
                            <div class="space-y-2">
                                <label class="form-label font-medium text-slate-800" for="role">Rôle :</label>
                                <select
                                    id="role"
                                    name="role"
                                    th:field="*{userSearch.role}"
                                    form="searchForm"
                                    class="bg-gray-100 border border-none text-slate-500 text-sm rounded-lg focus:bg-gray-200/75 focus:ring-0 block w-full px-4 py-2.5 font-medium"
                                >
                                    <option th:value="all">Tous</option>
                                    <option th:value="admin">Admin</option>
                                    <option th:value="user">Utilisateur</option>
                                </select>
                            </div>
                            <div class="space-y-2">
                                <label class="form-label font-medium text-slate-800" for="status">Statut :</label>
                                <select
                                    id="status"
                                    name="status"
                                    th:field="*{userSearch.status}"
                                    form="searchForm"
                                    class="bg-gray-100 border border-none text-slate-500 text-sm rounded-lg focus:bg-gray-200/75 focus:ring-0 block w-full px-4 py-2.5 font-medium"
                                >
                                    <option th:value="all">Tous</option>
                                    <option th:value="locked">Bloqué</option>
                                    <option th:value="unlocked">Débloqué</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <button
                    id="sortDropdownButton"
                    data-dropdown-toggle="sortDropdown"
                    data-dropdown-placement="bottom-end"
                    class="md:w-auto flex items-center justify-center py-2.5 px-3.5 text-sm font-medium text-blue-500 focus:outline-none bg-gray-100/75 rounded-lg hover:bg-blue-500 hover:text-white focus:bg-blue-500 focus:text-white transition-colors duration-75"
                    type="button"
                >
                    <i class="h-3.5 w-3.5 me-2 fa-solid fa-sort"></i>
                    <span>Trier</span>
                    <i class="-me-0.5 ms-3 w-3 h-3 fa-solid fa-chevron-down"></i>
                </button>
                <div id="sortDropdown"
                    class="hidden z-10 w-[15rem] bg-white rounded shadow-[0px_0px_50px_0px_rgba(82,63,105,0.15)] border border-gray-100 divide-y divide-gray-100">
                    <h6 class="px-5 py-4 font-semibold text-sm text-slate-800">
                        Sélectionner un tri
                    </h6>
                    <div class="space-y-2 text-sm" aria-labelledby="sortDropdownButton">
                        <div class="px-6 pt-4 pb-6 space-y-5">
                            <div class="space-y-2">
                                <label class="form-label font-medium text-slate-800" for="sortBy">Trier par :</label>
                                <select
                                    id="sortBy"
                                    name="sortBy"
                                    th:field="*{userSearch.sortBy}"
                                    form="searchForm"
                                    class="bg-gray-100 border border-none text-slate-500 text-sm rounded-lg focus:bg-gray-200/75 focus:ring-0 block w-full px-4 py-2.5 font-medium"
                                >
                                    <option th:value="id">Id</option>
                                    <option th:value="lastName">Nom</option>
                                    <option th:value="firstName">Prénom</option>
                                    <option th:value="email">Email</option>
                                    <option th:value="createdAt">Date de création</option>
                                    <option th:value="lastConnection">Derière connexion</option>
                                </select>
                            </div>
                            <label class="inline-flex items-center mb-5 cursor-pointer">
                                <input type="checkbox" name="sortAsc" th:field="*{userSearch.sortDesc}" form="searchForm" class="sr-only peer" />
                                <div
                                    class="relative w-9 h-5 bg-gray-200/75 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-blue-500 peer-checked:after:start-[1px] after:content-[''] after:absolute after:top-[2px] after:start-[0.175rem] after:bg-white after:border-gray-200/75 after:border after:rounded-full after:w-4 after:h-4 after:transition-all peer-checked:bg-blue-500"
                                ></div>
                                <span class="ms-3 text-sm font-medium text-slate-500">Descendant</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div>
                <button
                    type="submit"
                    form="searchForm"
                    class="w-full flex items-center justify-center px-2 py-1.5 text-sm font-medium text-white focus:outline-none bg-blue-500 rounded-lg hover:bg-blue-600 transition-colors duration-75 space-x-3 focus:ring focus:ring-blue-300"
                >
                    <i class="h-4 w-4 fa-solid fa-arrow-right"></i>
                    <span class="text-xs font-medium text-white md:hidden block"
                        >Lancer la recherche</span
                    >
                </button>
            </div>
        </div>
    </div>
</div>
